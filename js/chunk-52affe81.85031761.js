(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52affe81"],{"5d5a":function(t,e,a){"use strict";var s=a("ea49"),o=a.n(s);o.a},"7cb4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container main"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row py-5"},[a("div",{staticClass:"col-12 col-md-6"},[t._m(0),a("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.confirmPayment(e)}}},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{staticClass:"mt-3",attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:o,attrs:{id:"name",type:"text",name:"姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{attrs:{for:"email"}},[t._v("電子信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:o,attrs:{id:"email",type:"text",name:"電子信箱"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|min:8|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{attrs:{for:"tel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"form-control",class:o,attrs:{id:"tel",type:"tel",name:"電話"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{attrs:{for:"address"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",class:o,attrs:{id:"address",type:"address",name:"地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("label",{attrs:{for:"payment"}},[t._v("付款方式")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.payment,expression:"payment"}],staticClass:"form-control",class:t.classes,attrs:{id:"payment",type:"number",name:"付款方式",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.payment=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"ATM"}},[t._v("ATM")]),a("option",{attrs:{value:"CVS"}},[t._v("CVS")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),a("label",{attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{id:"message",type:"text",name:"message"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),a("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit",disabled:s}},[t._v("確認付款")])],1)]}}])})],1),a("div",{staticClass:"col-12 col-md-6"},[t._m(1),a("div",{staticClass:"product_view"},t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"d-flex border mb-2"},[a("div",{staticClass:"col-md-6 col-lg-5 col-xl-4 px-0"},[a("img",{attrs:{src:e.product.imageUrl,width:"100%",alt:""}})]),a("div",{staticClass:"col-md-4 col-lg-5 col-xl-6 pt-3 py-md-1 py-lg-3 pl-lg-4 pr-0 overflow-hidden"},[a("div",[a("h5",{staticClass:"mb-lg-2 text_overflow"},[t._v(t._s(e.product.title))]),a("div",[a("div",{staticClass:"mb-1"},[t._v("價格："+t._s(e.product.price))]),a("div",{staticClass:"mb-1"},[t._v("數量："+t._s(e.quantity))]),a("div",{staticClass:"mb-1"},[t._v("小計："+t._s(e.product.price*e.quantity))])])])]),a("div",{staticClass:"col-2 d-flex align-items-center justify-content-center"},[a("button",{staticClass:"btn btn-outline-danger",on:{click:function(a){return t.deleteItem(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])])})),0),a("div",{staticClass:"d-flex mt-4 align-items-center"},[a("div",{staticClass:"col-6 px-0 d-flex "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"px-2 coupon_input",attrs:{type:"text",placeholder:"請輸入優惠卷"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("button",{staticClass:"btn-dark coupon_btn",on:{click:t.getCoupon}},[t._v("套用")])]),a("h5",{staticClass:"mb-0 px-0 col-6 d-flex justify-content-end"},[t._v(" 總計 "+t._s(t._f("money")(t.couponInfo.percent?t.amount*(.01*t.couponInfo.percent):t.amount))+" ")])])])])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("h2",{staticClass:"mb-0"},[t._v("購買資訊")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("h2",{staticClass:"mb-4"},[t._v("購物車內容")])])}],n=(a("99af"),a("4160"),a("b0c0"),a("159b"),{data:function(){return{name:"",email:"",tel:"",address:"",payment:"",message:"",amount:"",couponCode:"",couponInfo:"",products:[],isLoading:!1}},methods:{getData:function(){var t=this;this.isLoading=!0;var e=0;this.axios.get("".concat("https://course-ec-api.hexschool.io/api/").concat("4e5317b1-b943-407e-81cc-73ea10b6482c","/ec/shopping")).then((function(a){t.products=a.data.data,t.products.forEach((function(a){e+=a.product.price,t.amount=e})),t.isLoading=!1}))},deleteItem:function(t){var e,a=this,s=this.products;s.forEach((function(a,s){a.product.id===t.product.id&&(e=s)})),this.axios.delete("".concat("https://course-ec-api.hexschool.io/api/").concat("4e5317b1-b943-407e-81cc-73ea10b6482c","/ec/shopping/").concat(s[e].product.id)).then((function(){a.getData()}))},confirmPayment:function(){var t=this;this.isLoading=!0;var e={name:this.name,email:this.email,tel:this.tel,address:this.address,payment:this.payment,coupon:this.couponCode,message:this.message};this.axios.post("".concat("https://course-ec-api.hexschool.io/api/").concat("4e5317b1-b943-407e-81cc-73ea10b6482c","/ec/orders"),e).then((function(){t.name="",t.email="",t.tel="",t.address="",t.payment="",t.message="",t.amount="",t.couponInfo="",t.couponCode="",t.coupon="",t.getData(),t.isLoading=!1,t.$swal("成功","成功訂購","success")}))},getCoupon:function(){var t=this;this.isLoading=!0,this.axios.post("".concat("https://course-ec-api.hexschool.io/api/").concat("4e5317b1-b943-407e-81cc-73ea10b6482c","/ec/coupon/search"),{code:this.couponCode}).then((function(e){t.couponInfo=e.data.data,t.isLoading=!1,t.$swal("成功","序號正確","success")})).catch((function(){t.isLoading=!1,t.$swal("失敗","序號錯誤","error")}))}},created:function(){this.getData()}}),i=n,r=(a("5d5a"),a("2877")),c=Object(r["a"])(i,s,o,!1,null,"19c56712",null);e["default"]=c.exports},8418:function(t,e,a){"use strict";var s=a("c04e"),o=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var i=s(e);i in t?o.f(t,i,n(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var s=a("23e7"),o=a("d039"),n=a("e8b5"),i=a("861d"),r=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),m=a("2d00"),v=p("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",h=m>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=d("concat"),_=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},C=!h||!b;s({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,s,o,n,i=r(this),d=u(i,0),p=0;for(e=-1,s=arguments.length;e<s;e++)if(n=-1===e?i:arguments[e],_(n)){if(o=c(n.length),p+o>f)throw TypeError(g);for(a=0;a<o;a++,p++)a in n&&l(d,p,n[a])}else{if(p>=f)throw TypeError(g);l(d,p++,n)}return d.length=p,d}})},b0c0:function(t,e,a){var s=a("83ab"),o=a("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,c="name";s&&!(c in n)&&o(n,c,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},ea49:function(t,e,a){}}]);
//# sourceMappingURL=chunk-52affe81.85031761.js.map